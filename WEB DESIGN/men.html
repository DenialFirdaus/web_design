<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>AustraFound | Men's Collection</title>
  <link rel="stylesheet" href="men&women.css" />
 </head>
 <body>
  <header>
   <img src="af logo.png" alt="af logo" width="198" style="max-width: 200px" />
   <nav>
    <ul>
     <li><a href="searchAF.html">Search</a></li>
     <li><a href="AF.html">Home</a></li>
     <li><a href="men.html">Men</a></li>
     <li><a href="women.html">Women</a></li>
     <li><a href="accessories.html">Accessories</a></li>
     <li><a href="contact.html">Contact</a></li>
     <li><a href="addtocarts.html">Add to Carts</a></li>
     <li><a href="login.html">Log in</a></li>
    </ul>
   </nav>
  </header>

  <section class="products">
   <h2>Men's Collection</h2>
   <div class="product-grid">
    <!-- Product 1 -->
    <div class="product">
     <img src="men2.1.jpeg" alt="Product 1" />
     <h3>COSMO - Puffer Basic Jacket</h3>
     <p>RM359.99</p>
     <label for="size1">Size:</label>
     <select id="size1" class="size-select">
      <option value="S">S</option>
      <option value="M">M</option>
      <option value="L">L</option>
      <option value="XL">XL</option>
     </select>
     <a href="#" class="buy-btn">Buy Now</a>
     <a
      href="addtocarts.html"
      class="cart-btn"
      data-name="COSMO - Puffer Basic Jacket"
      data-price="359.99"
      >Add to Cart</a
     >
    </div>
    <!-- Product 2 -->
    <div class="product">
     <img src="men2.jpg" alt="Product 2.2" />
     <h3>FINALITY - Oversized Graphic Hoodie</h3>
     <p>RM279.99</p>
     <label for="size2">Size:</label>
     <select id="size2" class="size-select">
      <option value="S">S</option>
      <option value="M">M</option>
      <option value="L">L</option>
      <option value="XL">XL</option>
     </select>
     <a href="#" class="buy-btn">Buy Now</a>
     <a
      href="addtocarts.html"
      class="cart-btn"
      data-name="FINALITY - Oversized Graphic Hoodie"
      data-price="279.99"
      >Add to Cart</a
     >
    </div>
    <!-- Product 3 -->
    <div class="product">
     <img src="men3.1.jpeg" alt="Product 3" />
     <h3>WINGLETS - Oversized Print T-Shirt</h3>
     <p>RM179.99</p>
     <label for="size3">Size:</label>
     <select id="size3" class="size-select">
      <option value="S">S</option>
      <option value="M">M</option>
      <option value="L">L</option>
      <option value="XL">XL</option>
     </select>
     <a href="#" class="buy-btn">Buy Now</a>
     <a
      href="addtocarts.html"
      class="cart-btn"
      data-name="WINGLETS - Oversized T-Shirt"
      data-price="179.99"
      >Add to Cart</a
     >
    </div>
    <!-- Product 4 -->
    <div class="product">
     <img src="men2.2.jpeg" alt="Product 1" />
     <h3>PETITION - Oversized Graphic Hoodie</h3>
     <p>RM279.99</p>
     <label for="size4">Size:</label>
     <select id="size4" class="size-select">
      <option value="S">S</option>
      <option value="M">M</option>
      <option value="L">L</option>
      <option value="XL">XL</option>
     </select>
     <a href="#" class="buy-btn">Buy Now</a>
     <a
      href="addtocarts.html"
      class="cart-btn"
      data-name="PETITION - Oversized Hoodie"
      data-price="279.99"
      >Add to Cart</a
     >
    </div>
    <!-- Product 5 -->
    <div class="product">
     <img src="menpants1.jpeg" alt="Product 1" />
     <h3>CARTIES - Baggy Basic Ripped Jeans</h3>
     <p>RM159.99</p>
     <label for="size5">Size:</label>
     <select id="size5" class="size-select">
      <option value="S">S</option>
      <option value="M">M</option>
      <option value="L">L</option>
      <option value="XL">XL</option>
     </select>
     <a href="#" class="buy-btn">Buy Now</a>
     <a
      href="addtocarts.html"
      class="cart-btn"
      data-name="CARTIES - Baggy Basic Ripped Jeans"
      data-price="159.99"
      >Add to Cart</a
     >
    </div>
    <!-- Product 6 -->
    <div class="product">
     <img src="menpants2.jpeg" alt="Product 1" />
     <h3>PUNK - Loose PU Leather Jeans</h3>
     <p>RM229.99</p>
     <label for="size6">Size:</label>
     <select id="size6" class="size-select">
      <option value="S">S</option>
      <option value="M">M</option>
      <option value="L">L</option>
      <option value="XL">XL</option>
     </select>
     <a href="#" class="buy-btn">Buy Now</a>
     <a
      href="addtocarts.html"
      class="cart-btn"
      data-name="PUNK - Loose PU Leather Jeans"
      data-price="229.99"
      >Add to Cart</a
     >
    </div>
    <!-- Product 7 -->
    <div class="product">
     <img src="menpants3.jpeg" alt="Product 1" />
     <h3>BLACKENS - Loose Cargo Jeans</h3>
     <p>RM179.99</p>
     <label for="size7">Size:</label>
     <select id="size7" class="size-select">
      <option value="S">S</option>
      <option value="M">M</option>
      <option value="L">L</option>
      <option value="XL">XL</option>
     </select>
     <a href="#" class="buy-btn">Buy Now</a>
     <a
      href="addtocarts.html"
      class="cart-btn"
      data-name="BLACKENS - Loose Cargo Jeans"
      data-price="179.99"
      >Add to Cart</a
     >
    </div>
    <!-- Product 8 -->
    <div class="product">
     <img src="menpants4.jpeg" alt="Product 1" />
     <h3>BALOON - Baloon Fit Basic Jeans</h3>
     <p>RM149.99</p>
     <label for="size8">Size:</label>
     <select id="size8" class="size-select">
      <option value="S">S</option>
      <option value="M">M</option>
      <option value="L">L</option>
      <option value="XL">XL</option>
     </select>
     <a href="#" class="buy-btn">Buy Now</a>
     <a
      href="addtocarts.html"
      class="cart-btn"
      data-name="BALOON - Baloon Fit Basic Jeans"
      data-price="149.99"
      >Add to Cart</a
     >
    </div>
   </div>
  </section>

  <footer>
   <p>&copy; 2024 AustraFound. All Rights Reserved.</p>
  </footer>
  <script src="add-to-cart.js"></script>
  <script>
   document.querySelectorAll(".cart-btn").forEach((button) => {
    button.addEventListener("click", function (event) {
     event.preventDefault();

     // Get the parent product div
     const productDiv = this.closest(".product");

     // Retrieve all product details
     const productName = this.getAttribute("data-name");
     const productPrice = parseFloat(this.getAttribute("data-price"));
     const productSize = productDiv.querySelector(".size-select").value;

     // Validate the data
     if (!productName || isNaN(productPrice) || !productSize) {
      alert("Please select all product options before adding to cart.");
      return;
     }

     // Create product object with all details
     const product = {
      name: productName,
      price: productPrice,
      size: productSize,
      quantity: 1,
      total: productPrice,
     };

     let cart = JSON.parse(localStorage.getItem("cart")) || [];

     // Check if the product with the same name AND size exists
     const existingProductIndex = cart.findIndex(
      (item) => item.name === product.name && item.size === product.size
     );

     if (existingProductIndex > -1) {
      cart[existingProductIndex].quantity++;
      cart[existingProductIndex].total =
       cart[existingProductIndex].price * cart[existingProductIndex].quantity;
     } else {
      cart.push(product);
     }

     localStorage.setItem("cart", JSON.stringify(cart));

     alert(
      `${productName} (Size: ${productSize}) has been added to your cart!`
     );
     window.location.href = "addtocarts.html";
    });
   });
  </script>

  <!-- Buy Now JavaScript -->
  <script src="buynow.js"></script>
  <script>
   document.addEventListener("DOMContentLoaded", function () {
    // Get all products from the page
    const products = Array.from(document.querySelectorAll(".product")).map(
     (product) => ({
      id: Math.random().toString(36).substr(2, 9),
      name: product.querySelector("h3").textContent,
      price: parseFloat(
       product.querySelector("p").textContent.replace("RM", "")
      ),
      image: product.querySelector("img").src,
      category: "men",
     })
    );

    // Get existing products or initialize empty array
    let allProducts = JSON.parse(localStorage.getItem("allProducts")) || [];

    // Remove existing men's products
    allProducts = allProducts.filter((p) => p.category !== "men");

    // Add new products
    allProducts = [...allProducts, ...products];

    // Save to localStorage
    localStorage.setItem("allProducts", JSON.stringify(allProducts));
   });
  </script>
 </body>
</html>
